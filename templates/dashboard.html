<!DOCTYPE html>
<html>
<head>
<title>Family Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
html { background: #0a0a1a; }
body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0a0a1a 0%, #151530 100%);
    color: white;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}
.container {
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-rows: auto auto auto 1fr auto;
    padding: 20px;
    gap: 15px;
}
.header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 5px;
}
.time { 
    font-size: 10rem;
    font-weight: 300;
    color: #FFD700;
    letter-spacing: -3px;
    line-height: 1;
}
.date {
    font-size: 2.5rem;
    color: rgba(255,255,255,0.7);
    margin-left: 20px;
}
.weather-header {
    display: flex;
    align-items: center;
    gap: 15px;
    background: rgba(255,255,255,0.1);
    padding: 15px 25px;
    border-radius: 15px;
}
.weather-temp { font-size: 4rem; font-weight: 300; }
.weather-icon { font-size: 3rem; }
.sun-times {
    font-size: 1.4rem;
    color: rgba(255,255,255,0.7);
    text-align: right;
    line-height: 1.6;
}
.sun-times .sunrise { color: #FFD700; }
.sun-times .sunset { color: #FF8C42; }
.travel-banner {
    display: none;
    background: linear-gradient(135deg, rgba(0, 150, 255, 0.25), rgba(0, 100, 200, 0.15));
    border: 2px solid rgba(0, 150, 255, 0.5);
    border-radius: 15px;
    padding: 15px 25px;
    font-size: 1.4rem;
    align-items: center;
    gap: 15px;
}
.travel-banner.active { display: flex; }
.travel-location { font-size: 1.8rem; font-weight: 600; color: #64B5F6; }
.travel-time { font-size: 2rem; font-weight: 300; color: #FFD700; font-family: monospace; }
.travel-sun { font-size: 1.2rem; color: rgba(255,255,255,0.7); }
.country-section {
    background: linear-gradient(135deg, rgba(155, 89, 182, 0.3), rgba(142, 68, 173, 0.2));
    border-radius: 15px;
    padding: 20px 25px;
    border: 2px solid rgba(155, 89, 182, 0.5);
}
.country-header {
    font-size: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: rgba(255,255,255,0.6);
    margin-bottom: 12px;
}
.country-content {
    display: flex;
    align-items: center;
    gap: 25px;
}
.country-flag { font-size: 5rem; line-height: 1; }
.country-name { font-size: 2.5rem; font-weight: 700; color: #E8DAEF; }
.country-details { font-size: 1.4rem; color: rgba(255,255,255,0.9); margin-top: 8px; }

/* ASTROLOGY SECTION */
.astrology-section {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 165, 0, 0.1));
    border-radius: 15px;
    padding: 20px 25px;
    border: 2px solid rgba(255, 215, 0, 0.4);
}
.astrology-header {
    font-size: 1.4rem;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: #FFD700;
    margin-bottom: 15px;
}
.astro-list {
    display: flex;
    flex-direction: row;
    gap: 15px;
}
.astro-item { flex: 1; }
.astro-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    padding: 15px 20px;
    border: 1px solid rgba(255, 215, 0, 0.3);
}
.astro-symbol {
    font-size: 2.5rem;
    min-width: 50px;
    text-align: center;
}
.astro-name {
    font-size: 1rem;
    font-weight: 600;
    color: #FFD700;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.astro-reading {
    font-size: 1.1rem;
    color: rgba(255,255,255,0.9);
    line-height: 1.4;
    flex: 1;
}

.main-content {
    display: flex;
    gap: 20px;
    overflow: hidden;
    min-height: 0;
}
.left-column {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 15px;
    overflow-y: auto;
}
.calendar-section {
    background: rgba(255,255,255,0.05);
    border-radius: 15px;
    padding: 20px;
    border: 2px solid rgba(255,255,255,0.1);
}
.calendar-header {
    font-size: 1.5rem;
    font-weight: 600;
    color: rgba(255,255,255,0.6);
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 3px;
}
.calendar-grid {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.day-row {
    display: flex;
    gap: 10px;
    padding: 12px 15px;
    background: rgba(255,255,255,0.06);
    border-radius: 10px;
    border-left: 4px solid transparent;
    min-height: 90px;
}
.day-row.today {
    background: rgba(255, 215, 0, 0.2);
    border-left-color: #FFD700;
}
.day-info { 
    min-width: 120px; 
    max-width: 140px;
    display: flex; 
    flex-direction: column; 
    gap: 5px; 
}
.day-name { font-size: 1.6rem; font-weight: 700; text-transform: uppercase; }
.day-name.today-label { color: #FFD700; }
.day-date { font-size: 1.4rem; color: rgba(255,255,255,0.7); font-weight: 500; }
.day-weather { font-size: 1.2rem; margin-top: 5px; }
.weather-icon-txt { font-size: 1.8rem; }
.day-events { 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    gap: 6px; 
    justify-content: center;
}
.event-item { 
    display: flex; 
    align-items: flex-start; 
    gap: 8px; 
    font-size: 1.4rem;
}
.event-emojis { font-size: 1.6rem; min-width: 60px; }
.event-time { 
    min-width: 55px; 
    color: rgba(255,255,255,0.6); 
    font-size: 1.3rem;
}
.event-title {
    flex: 1;
    line-height: 1.3;
}
.no-events { color: rgba(255,255,255,0.3); font-style: italic; font-size: 1.3rem; }
.event-no-school {
    background: rgba(0, 212, 170, 0.2);
    border: 1px solid rgba(0, 212, 170, 0.4);
    border-radius: 6px;
    padding: 2px 8px;
    color: #00D4AA;
    font-weight: 600;
}
.right-section {
    width: 38%;
    min-width: 380px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    overflow-y: auto;
}
.kids-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.kid-card {
    background: rgba(255,255,255,0.08);
    border-radius: 12px;
    padding: 15px 20px;
    border: 2px solid rgba(255,255,255,0.15);
}
.kid-header { font-size: 2rem; font-weight: 600; margin-bottom: 10px; }
.kid-chores { font-size: 1.6rem; }
.timers-section {
    background: linear-gradient(135deg, rgba(0, 212, 170, 0.2), rgba(0, 212, 170, 0.1));
    border-radius: 12px;
    padding: 15px;
    border: 2px solid rgba(0, 212, 170, 0.4);
    display: none;
}
.timers-section.active { display: block; }
.timers-header {
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #00D4AA;
    margin-bottom: 10px;
}
.timer-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    margin-bottom: 8px;
    font-size: 1.4rem;
}
.timer-name { font-weight: 600; }
.timer-countdown { 
    font-size: 1.8rem; 
    font-weight: 700; 
    color: #FFD700;
    font-family: monospace;
}
.grocery-section {
    background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(255, 107, 107, 0.1));
    border-radius: 12px;
    padding: 15px;
    border: 2px solid rgba(255, 107, 107, 0.4);
    display: none;
}
.grocery-section.active { display: block; }
.grocery-header {
    font-size: 1.1rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: #FF6B6B;
    margin-bottom: 10px;
}
.grocery-list { font-size: 1.4rem; line-height: 1.8; }
.grocery-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 4px 0;
}
.grocery-item::before {
    content: "‚Ä¢";
    color: #FF6B6B;
    font-size: 1.8rem;
}
.bvg-section {
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    padding: 15px;
    border: 2px solid rgba(255,255,255,0.1);
}
.bvg-header { font-size: 1.4rem; margin-bottom: 15px; }
.bvg-logo {
    background: #FF3333;
    color: #0a0a1a;
    font-weight: 700;
    padding: 5px 12px;
    border-radius: 6px;
    font-size: 1.2rem;
}
.bvg-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    background: rgba(255,255,255,0.08);
    border-radius: 10px;
    margin-bottom: 10px;
    font-size: 1.3rem;
}
.bvg-line {
    background: #FF3333;
    color: #0a0a1a;
    font-weight: 700;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 1.1rem;
}
.bvg-destination { flex: 1; margin-left: 15px; font-size: 1.3rem; }
.bvg-time { font-size: 1.6rem; font-weight: 600; color: #FFD700; }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <div style="display:flex;align-items:baseline;">
            <div class="time" id="clock">--:--</div>
            <div class="date" id="date">------</div>
        </div>
        <div style="display:flex;align-items:center;gap:20px;">
            <div class="sun-times" id="sun-times"></div>
            <div class="weather-header">
                <div class="weather-temp" id="current-temp">--</div>
                <div class="weather-icon" id="current-icon">‚òÄÔ∏è</div>
            </div>
        </div>
    </div>
    <div class="travel-banner" id="travel-banner"></div>

    <div class="country-section">
        <div class="country-header">üó∫Ô∏è Country of the Day</div>
        <div class="country-content">
            <div class="country-flag" id="country-flag">üè≥Ô∏è</div>
            <div>
                <div class="country-name" id="country-name">Loading...</div>
                <div class="country-details" id="country-details">--</div>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="left-column">
            <div class="calendar-section">
                <div class="calendar-header">üìÖ Next 7 Days</div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>
        </div>

        <div class="right-section">
            <div class="kids-section">
                <div class="kid-card">
                    <div class="kid-header">üå∏ Wren</div>
                    <div class="kid-chores" id="wren-chores">--</div>
                </div>
                <div class="kid-card">
                    <div class="kid-header">ü•≠ Ellis</div>
                    <div class="kid-chores" id="ellis-chores">--</div>
                </div>
            </div>
            
            <div class="timers-section" id="timers-section">
                <div class="timers-header">‚è±Ô∏è Active Timers</div>
                <div id="timers-list"></div>
            </div>
            
            <div class="grocery-section" id="grocery-section">
                <div class="grocery-header">üõí Grocery List</div>
                <div class="grocery-list" id="grocery-list"></div>
            </div>
            
            <div class="bvg-section">
                <div class="bvg-header"><span class="bvg-logo">U2</span> üöá Senefelderplatz</div>
                <div id="bvg-list"></div>
            </div>

        </div>
    </div>

    <!-- ASTROLOGY SECTION - FULL WIDTH BOTTOM -->
    <div class="astrology-section">
        <div class="astrology-header">‚ú® Daily Horoscope</div>
        <div class="astro-list">
            <div class="astro-item">
                <div class="astro-symbol">‚ôë</div>
                <div>
                    <div class="astro-name">Daddy & Wren</div>
                    <div class="astro-reading" id="astro-capricorn">Loading...</div>
                </div>
            </div>
            <div class="astro-item">
                <div class="astro-symbol">‚ôí</div>
                <div>
                    <div class="astro-name">Ellis</div>
                    <div class="astro-reading" id="astro-aquarius">Loading...</div>
                </div>
            </div>
            <div class="astro-item">
                <div class="astro-symbol">‚ôê</div>
                <div>
                    <div class="astro-name">Papa</div>
                    <div class="astro-reading" id="astro-sagittarius">Loading...</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
const PERSON_EMOJIS = {'family': 'üè†', 'papa': 'ü•ë', 'daddy': 'üç™', 'wren': 'üå∏', 'ellis': 'ü•≠'};
const WEATHER_EMOJIS = {0: '‚òÄÔ∏è', 1: 'üå§Ô∏è', 2: '‚õÖ', 3: '‚òÅÔ∏è', 45: 'üå´Ô∏è', 48: 'üå´Ô∏è', 51: 'üå¶Ô∏è', 53: 'üå¶Ô∏è', 55: 'üåßÔ∏è', 61: 'üåßÔ∏è', 63: 'üåßÔ∏è', 65: 'üåßÔ∏è', 71: 'üå®Ô∏è', 73: 'üå®Ô∏è', 75: '‚ùÑÔ∏è', 95: '‚õàÔ∏è', 96: '‚õàÔ∏è', 99: '‚õàÔ∏è'};
const dayAbbrev = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
let activeTimers = [];
let lastDataStr = '';
let currentTravelInfo = null;

function updateClock() {
    const now = new Date();
    document.getElementById('clock').textContent = now.toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit', hour12: false, timeZone: 'Europe/Berlin'});
    document.getElementById('date').textContent = dayAbbrev[now.getDay()] + ', ' + monthNames[now.getMonth()] + ' ' + now.getDate();

    // Update travel time live
    if (currentTravelInfo && currentTravelInfo.timezone) {
        const travelBanner = document.getElementById('travel-banner');
        try {
            const travelTime = now.toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit', hour12: false, timeZone: currentTravelInfo.timezone});
            const berlinTime = now.toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit', hour12: false, timeZone: 'Europe/Berlin'});
            const travelerName = currentTravelInfo.traveler || 'Someone';
            travelBanner.innerHTML = '‚úàÔ∏è <span class="travel-location">' + travelerName + ' in ' + currentTravelInfo.location + '</span> <span class="travel-time">' + travelTime + '</span> <span class="travel-sun">(Berlin: ' + berlinTime + ')</span>';
        } catch(e) {}
    }

    if (activeTimers.length > 0) {
        const nowMs = Date.now();
        activeTimers.forEach(timer => {
            if (!timer.element) return;
            const endsAt = new Date(timer.ends_at).getTime();
            const diffMs = endsAt - nowMs;
            if (diffMs <= 0) {
                timer.element.textContent = 'DONE!';
                timer.element.style.color = '#00D4AA';
            } else {
                const minutes = Math.floor(diffMs / 60000);
                const seconds = Math.floor((diffMs % 60000) / 1000);
                timer.element.textContent = (minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            }
        });
    }
}
setInterval(updateClock, 1000);

function formatDayName(dateStr) {
    const parts = dateStr.split('-');
    const d = new Date(parseInt(parts[0]), parseInt(parts[1])-1, parseInt(parts[2]), 12, 0, 0);
    const today = new Date();
    today.setHours(0,0,0,0);
    const check = new Date(d);
    check.setHours(0,0,0,0);
    return check.getTime() === today.getTime() ? 'TODAY' : dayAbbrev[d.getDay()];
}

function formatDateShort(dateStr) {
    const parts = dateStr.split('-');
    const d = new Date(parseInt(parts[0]), parseInt(parts[1])-1, parseInt(parts[2]), 12, 0, 0);
    return monthNames[d.getMonth()] + ' ' + d.getDate();
}

function generate7Days() {
    const days = [];
    const today = new Date();
    today.setHours(12, 0, 0, 0);
    for (let i = 0; i < 7; i++) {
        const d = new Date(today);
        d.setDate(d.getDate() + i);
        days.push(d.getFullYear() + '-' + String(d.getMonth() + 1).padStart(2, '0') + '-' + String(d.getDate()).padStart(2, '0'));
    }
    return days;
}

async function fetchData() {
    try {
        const response = await fetch('/api/status');
        const data = await response.json();
        const dataStr = JSON.stringify(data);
        if (dataStr === lastDataStr) return;
        lastDataStr = dataStr;
        
        if (data.cached_weather && data.cached_weather.temp !== undefined) {
            document.getElementById('current-temp').textContent = Math.round(data.cached_weather.temp) + '¬∞';
            document.getElementById('current-icon').textContent = WEATHER_EMOJIS[data.cached_weather.condition || 0] || '‚òÄÔ∏è';
            const sunEl = document.getElementById('sun-times');
            if (data.cached_weather.sunrise && data.cached_weather.sunset) {
                sunEl.innerHTML = '<span class="sunrise">‚òÄÔ∏è ' + data.cached_weather.sunrise + '</span><br><span class="sunset">üåô ' + data.cached_weather.sunset + '</span>';
            }
        }

        // Travel banner
        const travelBanner = document.getElementById('travel-banner');
        if (data.travel_info && data.travel_info.timezone) {
            currentTravelInfo = data.travel_info;
            travelBanner.classList.add('active');
        } else {
            currentTravelInfo = null;
            travelBanner.classList.remove('active');
        }
        
        if (data.country_of_day && data.country_of_day.name) {
            const c = data.country_of_day;
            document.getElementById('country-flag').textContent = c.flag_emoji || 'üè≥Ô∏è';
            document.getElementById('country-name').textContent = c.name;
            document.getElementById('country-details').innerHTML = 'üèõÔ∏è ' + (c.capital || 'N/A') + ' &nbsp;|&nbsp; üë• ' + (c.population || '--') + ' &nbsp;|&nbsp; üó£Ô∏è ' + ((c.languages && c.languages[0]) || '--') + ' &nbsp;|&nbsp; üí° ' + (c.fun_fact || 'A fascinating place!');
        }
        
        if (data.wren) {
            const w = data.wren;
            document.getElementById('wren-chores').innerHTML = 'üçΩÔ∏è ' + (w.dishes ? '‚úì' : '‚óã') + ' &nbsp;&nbsp; üßπ ' + (w.room ? '‚úì' : '‚óã') + ' &nbsp;&nbsp; üìö ' + (w.homework ? '‚úì' : '‚óã');
        }
        if (data.ellis) {
            const e = data.ellis;
            document.getElementById('ellis-chores').innerHTML = 'üß∏ ' + (e.toys ? '‚úì' : '‚óã') + ' &nbsp;&nbsp; üõèÔ∏è ' + (e.bed ? '‚úì' : '‚óã') + ' &nbsp;&nbsp; ü¶∑ ' + (e.teeth ? '‚úì' : '‚óã');
        }
        
        // ASTROLOGY - Simplified
        if (data.astrology) {
            const astro = data.astrology;
            if (astro.capricorn) document.getElementById('astro-capricorn').textContent = astro.capricorn;
            if (astro.aquarius) document.getElementById('astro-aquarius').textContent = astro.aquarius;
            if (astro.sagittarius) document.getElementById('astro-sagittarius').textContent = astro.sagittarius;
        }
        
        const timersSection = document.getElementById('timers-section');
        const timersList = document.getElementById('timers-list');
        const alexaTimers = data.alexa_timers || [];
        if (alexaTimers.length > 0) {
            activeTimers = [];
            timersList.innerHTML = alexaTimers.map(timer => '<div class="timer-item"><span class="timer-name">‚è±Ô∏è ' + timer.name + '</span><span class="timer-countdown" id="timer-' + timer.id + '">--:--</span></div>').join('');
            alexaTimers.forEach(timer => activeTimers.push({id: timer.id, ends_at: timer.ends_at, element: document.getElementById('timer-' + timer.id)}));
            timersSection.classList.add('active');
        } else {
            timersSection.classList.remove('active');
            activeTimers = [];
        }
        
        const grocerySection = document.getElementById('grocery-section');
        const groceryListEl = document.getElementById('grocery-list');
        const groceries = data.grocery_list || [];
        if (groceries.length > 0) {
            groceryListEl.innerHTML = groceries.map(item => '<div class="grocery-item">' + item + '</div>').join('');
            grocerySection.classList.add('active');
        } else {
            grocerySection.classList.remove('active');
        }
        
        const allDays = generate7Days();
        const forecastMap = {};
        if (data.cached_forecast) data.cached_forecast.forEach(f => forecastMap[f.date] = f);
        
        const eventsByDate = {};
        if (data.cached_events) {
            data.cached_events.forEach(e => {
                if (!eventsByDate[e.date]) eventsByDate[e.date] = [];
                const existing = eventsByDate[e.date].find(ex => ex.title === e.title);
                if (existing) {
                    if (!existing.calendars.includes(e.calendar)) existing.calendars.push(e.calendar);
                } else {
                    eventsByDate[e.date].push({title: e.title, time: e.time, calendars: [e.calendar]});
                }
            });
        }
        
        const gridHtml = allDays.map(date => {
            const isToday = date === allDays[0];
            const dayName = formatDayName(date);
            const dayEvents = eventsByDate[date] || [];
            const forecast = forecastMap[date];
            
            let eventsHtml = dayEvents.map(e => {
                const emojis = e.calendars.map(c => PERSON_EMOJIS[c] || '‚ùì').join('');
                const timeStr = e.time || '';
                const isNoSchool = e.title.toLowerCase().includes('no school') || e.title.toLowerCase().includes('schulfrei') || e.title.toLowerCase().includes('ferien');
                const titleClass = isNoSchool ? 'event-title event-no-school' : 'event-title';
                const displayTitle = isNoSchool ? 'üéâ ' + e.title : e.title;
                return '<div class="event-item"><span class="event-emojis">' + emojis + '</span>' + (timeStr ? '<span class="event-time">' + timeStr + '</span>' : '') + '<span class="' + titleClass + '">' + displayTitle + '</span></div>';
            }).join('') || '<span class="no-events">‚Äî</span>';
            
            let weatherHtml = '';
            if (forecast) {
                weatherHtml = '<div class="day-weather"><span class="weather-icon-txt">' + (WEATHER_EMOJIS[forecast.condition] || '‚òÄÔ∏è') + '</span> <span class="weather-temps"><span style="color:#FFD700;">' + forecast.high + '¬∞</span> <span style="color:#6B9BFF;">' + forecast.low + '¬∞</span></span></div>';
            }
            
            return '<div class="day-row ' + (isToday ? 'today' : '') + '"><div class="day-info"><div class="day-name ' + (isToday ? 'today-label' : '') + '">' + dayName + '</div><div class="day-date">' + formatDateShort(date) + '</div>' + weatherHtml + '</div><div class="day-events">' + eventsHtml + '</div></div>';
        }).join('');
        
        document.getElementById('calendar-grid').innerHTML = gridHtml;
        
        const bvgList = document.getElementById('bvg-list');
        if (data.cached_transit && data.cached_transit.length > 0) {
            bvgList.innerHTML = data.cached_transit.slice(0,3).map(d => {
                const when = new Date(d.when);
                const now = new Date();
                const diffMinutes = Math.round((when - now) / 60000);
                const timeStr = diffMinutes <= 0 ? 'Now' : diffMinutes + ' min';
                const timeColor = diffMinutes <= 3 ? 'color:#FF6B6B;' : 'color:#FFD700;';
                let direction = d.direction;
                if (direction.includes(',')) direction = direction.split(',')[0];
                if (direction.length > 25) direction = direction.substring(0, 22) + '...';
                return '<div class="bvg-item"><span class="bvg-line">' + d.line + '</span><span class="bvg-destination">' + direction + '</span><span class="bvg-time" style="' + timeColor + '">' + timeStr + '</span></div>';
            }).join('');
        }
    } catch (err) {
        console.error('Error:', err);
    }
}

fetchData();
setInterval(fetchData, 300000);
</script>
</body>
</html>
