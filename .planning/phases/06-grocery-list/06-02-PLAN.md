---
phase: 06-grocery-list
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/components/grocery/GroceryInput.tsx
  - src/components/grocery/GroceryItem.tsx
  - src/components/grocery/GroceryList.tsx
  - src/components/grocery/GroceryPanel.tsx
autonomous: true
requirements: [GROC-01, GROC-02, GROC-04]

must_haves:
  truths:
    - "User can type an item name and submit it via Enter key or tap"
    - "Each item shows a checkbox, name, and delete button with 44px min touch targets"
    - "Checked items show strikethrough and muted color"
    - "Scrollable list handles many items without layout overflow"
    - "GroceryPanel works in both compact sidebar mode and full mobile mode"
  artifacts:
    - path: "src/components/grocery/GroceryInput.tsx"
      provides: "Text input + add button form component"
      exports: ["GroceryInput"]
    - path: "src/components/grocery/GroceryItem.tsx"
      provides: "Single grocery item row with check/delete"
      exports: ["GroceryItem"]
    - path: "src/components/grocery/GroceryList.tsx"
      provides: "Scrollable list of GroceryItem components"
      exports: ["GroceryList"]
    - path: "src/components/grocery/GroceryPanel.tsx"
      provides: "Complete grocery panel combining list + input + header"
      exports: ["GroceryPanel"]
  key_links:
    - from: "src/components/grocery/GroceryPanel.tsx"
      to: "src/hooks/useGroceries.ts"
      via: "hook consumption for data and mutations"
      pattern: "useGroceries"
    - from: "src/components/grocery/GroceryPanel.tsx"
      to: "src/components/grocery/GroceryList.tsx"
      via: "renders list of items"
      pattern: "<GroceryList"
    - from: "src/components/grocery/GroceryPanel.tsx"
      to: "src/components/grocery/GroceryInput.tsx"
      via: "renders input for adding items"
      pattern: "<GroceryInput"
---

<objective>
Create all grocery list UI components: input form, item row, scrollable list, and the main panel container.

Purpose: Touch-friendly grocery management UI usable on both mobile (full interactive) and wall display (compact read view). All components are self-contained and ready for App.tsx integration in Plan 03.
Output: 4 component files in `src/components/grocery/`
</objective>

<execution_context>
@/Users/joshua/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joshua/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-grocery-list/06-RESEARCH.md
@.planning/phases/06-grocery-list/06-01-SUMMARY.md
@src/hooks/useGroceries.ts
@src/types/database.ts
@src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GroceryInput and GroceryItem components</name>
  <files>src/components/grocery/GroceryInput.tsx, src/components/grocery/GroceryItem.tsx</files>
  <action>
**GroceryInput.tsx:**
Create a form component that accepts `onAdd: (name: string) => void` prop.

- HTML `<form>` with `onSubmit` handler (handles Enter key and mobile "done" button natively)
- Text `<input>` with: `type="text"`, `placeholder="Add item..."`, `autoComplete="off"`, `enterKeyHint="done"` (shows "done" on iOS keyboard)
- Minimum height `min-h-[44px]` on both input and button (Apple HIG touch targets)
- Submit button shows `+` character, disabled when input is empty/whitespace
- On submit: trim value, call `onAdd(trimmed)`, clear input
- Styling: flex row with gap-2, input gets `flex-1 rounded-lg bg-white/10 px-4 text-white placeholder:text-white/40 outline-none focus:ring-2 focus:ring-accent-gold`, button gets `rounded-lg bg-accent-gold text-bg-primary font-bold disabled:opacity-30`
- Wrap in `p-3` padding

**GroceryItem.tsx:**
Create a row component accepting `{ item: Grocery; onToggle: (id: string, checked: boolean) => void; onRemove: (id: string) => void }`.

- Outer div: `flex items-center gap-3 min-h-[44px] px-3 py-2`
- Checkbox button (left): 44x44px touch target, shows `IoCheckmarkCircle` (green-400) when checked, `IoEllipseOutline` (white/40) when unchecked. Icons from `react-icons/io5`, size `w-6 h-6`. `aria-label` toggles between "Check" and "Uncheck".
- Item name (center): `flex-1 text-base`, adds `line-through text-white/30` when checked, otherwise `text-white`
- Delete button (right): 44x44px touch target, `IoTrashOutline` icon (w-5 h-5), `text-white/20 hover:text-red-400 transition-colors`, `aria-label="Remove"`

Import `Grocery` type from `../../types/database`. Import icons from `react-icons/io5`.
  </action>
  <verify>Run `npx tsc --noEmit` -- no type errors in either file.</verify>
  <done>GroceryInput handles text entry with form submission. GroceryItem renders a single row with check/uncheck and delete, all with 44px touch targets.</done>
</task>

<task type="auto">
  <name>Task 2: Create GroceryList and GroceryPanel components</name>
  <files>src/components/grocery/GroceryList.tsx, src/components/grocery/GroceryPanel.tsx</files>
  <action>
**GroceryList.tsx:**
A scrollable list component accepting `{ items: Grocery[]; onToggle: (id: string, checked: boolean) => void; onRemove: (id: string) => void }`.

- Maps over `items` rendering `<GroceryItem>` for each, keyed by `item.id`
- Wrapped in a div with `overflow-y-auto scrollbar-hide` (scrollbar-hide class already defined in index.css)
- If items array is empty, show nothing (empty state handled by parent)

**GroceryPanel.tsx:**
The main panel component that consumes `useGroceries()` and composes all sub-components. Accepts an optional `variant` prop: `'full' | 'compact'` (default `'full'`).

**Full variant** (used on mobile):
- Outer container: `flex flex-col h-full`
- Header: `flex items-center justify-between px-3 pt-3 pb-1`
  - Title: `text-lg font-semibold text-white` showing "Groceries" with unchecked count badge in parentheses
  - "Clear done" button: only visible when there are checked items. Small text button (`text-sm text-white/40 hover:text-white/60`), calls `clearChecked()`
- List area: `flex-1 overflow-y-auto` containing `<GroceryList>` with ALL items (checked and unchecked)
- Empty state: when `items.length === 0`, show centered text "No items yet" in `text-white/30`
- Input area: `sticky bottom-0 bg-bg-primary/80 backdrop-blur-sm border-t border-white/10` containing `<GroceryInput>`

**Compact variant** (used on wall display sidebar):
- Wrapped in `card-glass p-4` (existing glass card style)
- Header: `text-sm font-semibold text-white/60 uppercase tracking-wider mb-2` showing "Groceries (N)" where N is unchecked count
- Shows ONLY unchecked items via `<GroceryList>` (filter items where `!checked`)
- No input field (kiosk is non-interactive)
- No "Clear done" button
- Max height with overflow scroll to prevent sidebar blowout: `max-h-[300px] overflow-y-auto scrollbar-hide`

When `supabaseEnabled` is false (from `../lib/supabase`), the full variant should show a message: "Connect Supabase to use grocery list" in `text-white/30 text-center py-8`.

Import `useGroceries` from `../../hooks/useGroceries` and `supabaseEnabled` from `../../lib/supabase`.
  </action>
  <verify>Run `npm run build` -- builds successfully with zero errors.</verify>
  <done>GroceryList renders a scrollable item list. GroceryPanel provides full (mobile) and compact (wall sidebar) variants, consuming useGroceries hook for all data and mutations.</done>
</task>

</tasks>

<verification>
- `npm run build` succeeds with zero errors
- All 4 component files exist in `src/components/grocery/`
- GroceryPanel full variant has input, list, header with clear button, and empty state
- GroceryPanel compact variant shows only unchecked items in card-glass style
- All interactive elements have min 44px touch targets
</verification>

<success_criteria>
Complete set of grocery UI components ready for integration. GroceryPanel can be dropped into App.tsx in both full and compact modes.
</success_criteria>

<output>
After completion, create `.planning/phases/06-grocery-list/06-02-SUMMARY.md`
</output>
