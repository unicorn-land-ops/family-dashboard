---
phase: 01-foundation-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - tsconfig.app.json
  - tsconfig.node.json
  - vite.config.ts
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/index.css
  - src/vite-env.d.ts
  - .github/workflows/deploy.yml
  - .gitignore
autonomous: true
requirements:
  - DISP-01
  - DISP-02

must_haves:
  truths:
    - "Project builds successfully with `npm run build` producing dist/ output"
    - "Dev server starts with `npm run dev` and serves a page"
    - "GitHub Actions workflow exists to deploy to GitHub Pages on push to master"
    - "Tailwind CSS v4 classes render correctly in dev mode"
    - "PWA manifest configures standalone display for iPhone home screen"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "vite"
    - path: "vite.config.ts"
      provides: "Vite configuration with React, Tailwind, PWA plugins and GitHub Pages base path"
      contains: "family-dashboard"
    - path: "src/index.css"
      provides: "Tailwind CSS v4 import with Inter font and custom theme"
      contains: "@import \"tailwindcss\""
    - path: ".github/workflows/deploy.yml"
      provides: "GitHub Actions deployment to GitHub Pages"
      contains: "deploy-pages"
    - path: "src/App.tsx"
      provides: "Root React component"
      contains: "function App"
  key_links:
    - from: "vite.config.ts"
      to: "@tailwindcss/vite"
      via: "Vite plugin registration"
      pattern: "tailwindcss\\(\\)"
    - from: "src/index.css"
      to: "tailwindcss"
      via: "CSS import"
      pattern: "@import.*tailwindcss"
    - from: ".github/workflows/deploy.yml"
      to: "dist/"
      via: "Build output upload"
      pattern: "upload-pages-artifact"
---

<objective>
Scaffold the Vite + React + TypeScript project with Tailwind CSS v4, PWA support, and GitHub Pages deployment pipeline.

Purpose: Establish the modern build toolchain and deployment infrastructure that all subsequent phases build upon. This replaces the single-file static dashboard with a proper React application.

Output: A buildable, deployable Vite + React + TypeScript project with Tailwind CSS v4, PWA manifest, and GitHub Actions CI/CD to GitHub Pages.
</objective>

<execution_context>
@/Users/joshua/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joshua/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-setup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Vite + React + TypeScript project with Tailwind CSS v4 and PWA</name>
  <files>
    package.json
    tsconfig.json
    tsconfig.app.json
    tsconfig.node.json
    vite.config.ts
    index.html
    src/main.tsx
    src/App.tsx
    src/index.css
    src/vite-env.d.ts
    .gitignore
  </files>
  <action>
IMPORTANT: The existing `index.html` at project root is the current live dashboard (1215 lines). Do NOT delete or overwrite it yet. It will be handled in a later phase.

1. Run `npm create vite@latest . -- --template react-ts` from the project root. If prompted about existing files, allow overwriting only the Vite template files (NOT the existing `index.html`). If the scaffolding tool overwrites `index.html`, restore it from git after scaffolding, then create the Vite entry HTML as a minimal file that Vite needs.

   Actually, since the root already has files, scaffold into a temp directory and move files:
   ```bash
   cd /tmp && npm create vite@latest family-dashboard-scaffold -- --template react-ts
   ```
   Then copy the scaffolded files into the project root, being careful NOT to overwrite:
   - The existing `index.html` (rename the old one to `index.old.html`, use Vite's new `index.html`)
   - The existing `.gitignore` (merge Vite's ignores into the existing one)
   - Any existing directories (`.planning/`, `calendar-proxy/`, `docs/`, `ha-config/`, `scripts/`)

2. Install Tailwind CSS v4 with Vite plugin:
   ```bash
   npm install -D tailwindcss @tailwindcss/vite
   ```

3. Install PWA plugin:
   ```bash
   npm install -D vite-plugin-pwa
   ```

4. Configure `vite.config.ts` with all three plugins (react, tailwindcss, VitePWA) and `base: '/family-dashboard/'`. Use the exact configuration from RESEARCH.md "Vite Configuration (Complete)" section, including:
   - `react()` plugin
   - `tailwindcss()` plugin
   - `VitePWA()` with manifest (name: 'Family Dashboard', display: 'standalone', background_color: '#0a0a1a', theme_color: '#0a0a1a', orientation: 'any')
   - `build.sourcemap: false`

5. Set up `src/index.css` with Tailwind v4 import and custom theme. Use the exact CSS from RESEARCH.md "CSS Entry File" section:
   - `@import "tailwindcss";`
   - Inter font import from Google Fonts
   - `@theme` block with custom colors (bg-primary: #0a0a1a, bg-secondary: #151530, accent-gold: #FFD700, text-primary: #ffffff, text-secondary: rgba(255,255,255,0.7), surface: rgba(255,255,255,0.1))
   - Global body styles with gradient background and hidden overflow

6. Update `src/App.tsx` to a minimal placeholder that uses Tailwind classes to confirm styling works:
   ```tsx
   function App() {
     return (
       <div className="h-dvh w-screen flex items-center justify-center bg-bg-primary text-text-primary">
         <h1 className="text-4xl font-light">Family Dashboard</h1>
       </div>
     );
   }
   export default App;
   ```

7. Rename existing `index.html` to `index.old.html` to preserve it. The new Vite `index.html` at project root should be the standard Vite entry point referencing `src/main.tsx`.

8. Verify: `npm run build` succeeds and `npm run dev` serves the page with styled text.
  </action>
  <verify>
Run `npm run build` — must exit 0 and produce `dist/` directory.
Run `npm run dev` — must start dev server without errors.
Confirm `dist/index.html` exists after build.
Confirm `dist/assets/` contains `.js` and `.css` files.
  </verify>
  <done>
Project builds successfully. Dev server starts and shows "Family Dashboard" text on a dark background. Tailwind classes are applied (visible dark background, centered white text). PWA manifest is generated in dist/.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create GitHub Actions deployment workflow</name>
  <files>
    .github/workflows/deploy.yml
  </files>
  <action>
Create `.github/workflows/deploy.yml` using the exact workflow from RESEARCH.md "GitHub Actions Deployment Workflow" section:

- Trigger on push to `master` branch and `workflow_dispatch`
- Permissions: contents read, pages write, id-token write
- Concurrency group: 'pages' with cancel-in-progress
- Steps: checkout, setup node (lts/*), npm ci, npm run build, configure-pages, upload-pages-artifact (path: './dist'), deploy-pages

Use these action versions (from research):
- `actions/checkout@v5`
- `actions/setup-node@v6`
- `actions/configure-pages@v5`
- `actions/upload-pages-artifact@v4`
- `actions/deploy-pages@v4`

Also update `.gitignore` to include standard Vite ignores if not already present:
- `node_modules`
- `dist`
- `dist-ssr`
- `*.local`
  </action>
  <verify>
Confirm `.github/workflows/deploy.yml` exists and contains valid YAML.
Run `npm run build` to confirm dist/ is created (the artifact the workflow uploads).
Validate the workflow references the correct branch (`master`).
  </verify>
  <done>
GitHub Actions workflow file exists at `.github/workflows/deploy.yml`. It triggers on push to master, builds with npm, and deploys dist/ to GitHub Pages. The .gitignore includes node_modules and dist.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` exits with code 0
2. `npm run dev` starts without errors
3. `dist/` directory contains index.html, assets/*.js, assets/*.css
4. `.github/workflows/deploy.yml` is valid YAML with correct branch and action versions
5. `src/index.css` contains `@import "tailwindcss"` (v4 style, not v3)
6. `vite.config.ts` contains `base: '/family-dashboard/'`
7. Existing dashboard preserved as `index.old.html`
</verification>

<success_criteria>
- Project scaffolded with Vite + React 19 + TypeScript
- Tailwind CSS v4 configured via Vite plugin (NOT PostCSS)
- PWA manifest configured for standalone display
- GitHub Actions deploys to Pages on push to master
- Build produces working dist/ output
- Existing dashboard preserved (not lost)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-setup/01-01-SUMMARY.md`
</output>
