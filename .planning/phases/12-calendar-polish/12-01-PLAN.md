---
phase: 12-calendar-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/calendar/config.ts
  - src/components/calendar/EventCard.tsx
  - src/components/calendar/DayRow.tsx
autonomous: true
requirements:
  - FIX-02
  - CALL-01
  - CALL-02

must_haves:
  truths:
    - "Each calendar event displays the correct person emoji before the event name"
    - "Papa shows avocado, Daddy shows cookie, Wren shows cherry blossom, Ellis shows mango, Family shows house"
    - "Weather info (temperature, icon) displays underneath the day header row, not inline"
    - "Calendar layout remains readable on both wall kiosk and mobile views"
  artifacts:
    - path: "src/lib/calendar/config.ts"
      provides: "Updated person emoji mappings"
      contains: "\\u{1F951}"
    - path: "src/components/calendar/EventCard.tsx"
      provides: "Person badge before event summary"
    - path: "src/components/calendar/DayRow.tsx"
      provides: "Weather row below day header"
  key_links:
    - from: "src/components/calendar/EventCard.tsx"
      to: "src/lib/calendar/config.ts"
      via: "CALENDAR_FEEDS lookup for person emoji"
      pattern: "CALENDAR_FEEDS\\.find"
    - from: "src/components/calendar/DayRow.tsx"
      to: "src/components/calendar/WeatherBadge.tsx"
      via: "WeatherBadge rendered in own row below header"
      pattern: "WeatherBadge"
---

<objective>
Polish the calendar display: update person emojis to family-preferred set, move emoji badges before event names, and relocate weather info below the day header.

Purpose: Calendar events currently show generic person emojis after the event name, and weather is crammed inline with the day header. This plan fixes both for cleaner readability.
Output: Three modified files -- config.ts, EventCard.tsx, DayRow.tsx
</objective>

<execution_context>
@/Users/joshua/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joshua/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-calendar-polish/12-RESEARCH.md
@src/lib/calendar/config.ts
@src/components/calendar/EventCard.tsx
@src/components/calendar/DayRow.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update person emojis and move badge before event name</name>
  <files>src/lib/calendar/config.ts, src/components/calendar/EventCard.tsx</files>
  <action>
In `src/lib/calendar/config.ts`, update the `emoji` field for each person in CALENDAR_FEEDS:
- Papa: change `'\u{1F468}'` to `'\u{1F951}'` (avocado)
- Daddy: change `'\u{1F468}\u{200D}\u{1F9B0}'` to `'\u{1F36A}'` (cookie)
- Wren: change `'\u{1F985}'` to `'\u{1F338}'` (cherry blossom)
- Ellis: change `'\u{1F31F}'` to `'\u{1F96D}'` (mango)
- Family: change `'\u{1F468}\u{200D}\u{1F468}\u{200D}\u{1F467}\u{200D}\u{1F466}'` to `'\u{1F3E0}'` (house)

Keep all other fields (id, name, calendarUrl, isWorkCalendar) unchanged. Use Unicode escape sequences, not raw emoji characters (matching existing code pattern).

In `src/components/calendar/EventCard.tsx`, swap the order of the "Person badges" div and the "Summary" div inside the flex container. Currently the order is: Time column, Summary (flex-1), Person badges (shrink-0). Change to: Time column, Person badges (shrink-0), Summary (flex-1). Keep all className attributes and content exactly as-is -- only move the two divs relative to each other.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors. Visually inspect the source: config.ts has the 5 new emoji codes, EventCard.tsx has the person badges div appearing before the summary div in JSX order.
  </verify>
  <done>Config contains avocado/cookie/cherry-blossom/mango/house emojis. EventCard renders [Time] [Emoji] [Summary] layout order.</done>
</task>

<task type="auto">
  <name>Task 2: Move weather badge below day header row</name>
  <files>src/components/calendar/DayRow.tsx</files>
  <action>
In `src/components/calendar/DayRow.tsx`, move the WeatherBadge out of the day header flex row and into its own div below it:

1. Remove `justify-between` from the header div (line 32) since weather no longer sits on the right. Change `className="flex items-baseline justify-between gap-2 px-1 mb-1"` to `className="flex items-baseline gap-2 px-1 mb-0.5"` (also tighten mb since weather row adds its own spacing).

2. Remove the inner wrapping `<div className="flex items-baseline gap-2">` around the day label and date spans (lines 33-44) -- no longer needed since the header only contains those two spans now. The day label span and date span become direct children of the header div.

3. Remove the `{dailyWeather && (<WeatherBadge .../>)}` block from inside the header div (lines 45-51).

4. Add a new weather row div AFTER the header div and BEFORE the events section:
```tsx
{dailyWeather && (
  <div className="px-1 mb-1">
    <WeatherBadge
      high={dailyWeather.high}
      low={dailyWeather.low}
      weatherCode={dailyWeather.weatherCode}
    />
  </div>
)}
```

Keep all event rendering, separator, and other logic unchanged.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors. Run `npm run build` to confirm production build succeeds. Visually inspect DayRow.tsx: WeatherBadge is rendered in its own div between the header and events sections.
  </verify>
  <done>Weather badge renders in its own row underneath the day header, not inline. Build passes without errors.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` -- no TypeScript errors
2. `npm run build` -- production build succeeds
3. Source inspection confirms:
   - config.ts: 5 updated emoji Unicode escapes
   - EventCard.tsx: badge div before summary div
   - DayRow.tsx: WeatherBadge in own row after header
</verification>

<success_criteria>
- All three requirements (FIX-02, CALL-01, CALL-02) addressed in modified files
- TypeScript compilation passes
- Production build succeeds
- Person emoji order: [Time] [Emoji badge] [Event name]
- Weather position: Below day header, not inline
</success_criteria>

<output>
After completion, create `.planning/phases/12-calendar-polish/12-01-SUMMARY.md`
</output>
