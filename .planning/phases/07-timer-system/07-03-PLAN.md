---
phase: 07-timer-system
plan: 03
type: execute
wave: 3
depends_on: ["07-02"]
files_modified:
  - src/hooks/useMobileNav.ts
  - src/components/layout/MobileNav.tsx
  - src/App.tsx
autonomous: true
requirements: [TIMR-01, TIMR-02, TIMR-04, TIMR-05]

must_haves:
  truths:
    - "Mobile users can navigate to a Timers tab from the bottom nav"
    - "Wall display shows active timers in the sidebar"
    - "Timer sidebar card only appears when timers are active or recently completed"
    - "Timer tab shows full TimerPanel with input, list, and alerts"
    - "All three mobile tabs (Calendar, Groceries, Timers) work correctly"
  artifacts:
    - path: "src/hooks/useMobileNav.ts"
      provides: "MobileView type including 'timers'"
      exports: ["useMobileNav", "MobileView"]
    - path: "src/components/layout/MobileNav.tsx"
      provides: "Three-tab bottom nav with timer icon"
      exports: ["MobileNav"]
    - path: "src/App.tsx"
      provides: "TimerPanel wired into sidebar (compact) and main (full)"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/timer/TimerPanel.tsx"
      via: "import and render in sidebar + main"
      pattern: "import.*TimerPanel.*from.*timer/TimerPanel"
    - from: "src/App.tsx"
      to: "src/hooks/useTimers.ts"
      via: "activeCount for conditional sidebar rendering"
      pattern: "useTimers\\(\\)"
    - from: "src/components/layout/MobileNav.tsx"
      to: "src/hooks/useMobileNav.ts"
      via: "MobileView type includes timers"
      pattern: "'timers'"
---

<objective>
Wire timer components into the dashboard: add Timers tab to mobile navigation, render TimerPanel in wall sidebar (compact, conditional), and render full TimerPanel on mobile when Timers tab is active.

Purpose: Completes the timer integration by connecting UI components to the application shell. Mirrors the exact pattern from 06-03 (grocery dashboard integration).
Output: Updated useMobileNav.ts, MobileNav.tsx, App.tsx
</objective>

<execution_context>
@/Users/joshua/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joshua/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-timer-system/07-RESEARCH.md
@.planning/phases/06-grocery-list/06-03-SUMMARY.md
@.planning/phases/07-timer-system/07-02-SUMMARY.md

@src/App.tsx
@src/hooks/useMobileNav.ts
@src/components/layout/MobileNav.tsx
@src/components/timer/TimerPanel.tsx
@src/hooks/useTimers.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add timers to mobile navigation</name>
  <files>src/hooks/useMobileNav.ts, src/components/layout/MobileNav.tsx</files>
  <action>
**src/hooks/useMobileNav.ts** — Extend the MobileView type:

Change `export type MobileView = 'calendar' | 'groceries';` to `export type MobileView = 'calendar' | 'groceries' | 'timers';`

No other changes needed. The hook itself is generic.

**src/components/layout/MobileNav.tsx** — Add Timers tab:

1. Add import: `import { IoTimerOutline } from 'react-icons/io5';` (add to existing import from react-icons/io5).
2. Add third entry to the `tabs` array: `{ view: 'timers', label: 'Timers', icon: IoTimerOutline }`.
3. Order should be: Calendar, Groceries, Timers (left to right).

No other changes needed. The component already maps over the tabs array dynamically.
  </action>
  <verify>Run `npx tsc --noEmit` — zero type errors. Verify MobileView type now includes 'timers'.</verify>
  <done>MobileView type includes 'timers'. MobileNav renders three tabs: Calendar, Groceries, Timers with appropriate icons.</done>
</task>

<task type="auto">
  <name>Task 2: Wire TimerPanel into App.tsx sidebar and main area</name>
  <files>src/App.tsx</files>
  <action>
Add timer integration to App.tsx following the exact grocery pattern from 06-03:

1. **Add imports:**
   - `import { TimerPanel } from './components/timer/TimerPanel';`
   - `import { useTimers } from './hooks/useTimers';`

2. **Add hook call** inside `App()` function, alongside the existing `useGroceries()`:
   - `const { activeCount: activeTimerCount } = useTimers();`
   - Note: We need `activeCount` renamed to `activeTimerCount` to avoid conflict. Alternatively destructure as: `const timers = useTimers();` and use `timers.activeCount`. Use the rename pattern: `const { activeCount: activeTimerCount } = useTimers();`

3. **Main content area** — add timer view alongside existing views:
   - After `{activeView === 'groceries' && <GroceryPanel variant="full" />}` add:
   - `{activeView === 'timers' && <TimerPanel variant="full" />}`

4. **Sidebar** — add compact timer panel above the grocery panel (timers are more time-sensitive):
   - Before the `{uncheckedCount > 0 && <GroceryPanel variant="compact" />}` line, add:
   - `{activeTimerCount > 0 && <TimerPanel variant="compact" />}`
   - This shows timers in the wall sidebar only when there are active or recently completed timers, mirroring the conditional grocery sidebar pattern. Note: also show when there are completed (alerting) timers. Update the condition to check both: use `const { activeCount: activeTimerCount, completedTimers } = useTimers();` and condition `{(activeTimerCount > 0 || completedTimers.length > 0) && <TimerPanel variant="compact" />}`.

Final App.tsx should have:
- Both `useGroceries()` and `useTimers()` hook calls
- Three conditional views in main: calendar, groceries, timers
- Two conditional sidebar cards: timers (when active/completed), groceries (when unchecked items)
- Sidebar order: TimerPanel compact (conditional) -> GroceryPanel compact (conditional) -> ContentRotator -> RotationIndicator
  </action>
  <verify>Run `npm run build` — zero errors. Verify App.tsx imports TimerPanel and useTimers. Verify the three mobile views are conditionally rendered. Verify sidebar has timer panel before grocery panel.</verify>
  <done>TimerPanel renders in wall sidebar (compact, conditional on active/completed timers) and mobile main area (full, on Timers tab). Build succeeds with zero errors. All three mobile views work.</done>
</task>

</tasks>

<verification>
- `npm run build` succeeds with zero errors
- MobileView type is `'calendar' | 'groceries' | 'timers'`
- MobileNav has three tabs with correct icons
- App.tsx renders TimerPanel compact in sidebar (conditional)
- App.tsx renders TimerPanel full in main area (when activeView === 'timers')
- Sidebar order: timers -> groceries -> content rotator
- No new dependencies in package.json
</verification>

<success_criteria>
Timer system is fully integrated into the dashboard. Mobile users can navigate to a dedicated Timers tab to create and manage timers. Wall display shows active/alerting timers prominently in the sidebar. The full timer lifecycle works: create from mobile, countdown visible on wall, alert on completion, dismiss from mobile.
</success_criteria>

<output>
After completion, create `.planning/phases/07-timer-system/07-03-SUMMARY.md`
</output>
